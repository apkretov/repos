<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHML 1.0 Strict//EN"	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml">
	<head>
		<title>Basic DOM Functionality</title>
		
		<style type="text/css">
			h1, h3 {text-align: center; font-family: Geneva, Tahoma, sans-serif;}
			p {margin-left: 5%; margin-right: 5%; font-family: Arial, Helvetica, sans-serif;}
			ul {margin-left: 10%;}
			a {text-decoration: none;}
			a:hover {text-decoration: underline;}
			.nav {width: 100%; border-top: 3px dashed blue; padding-top: 10px;}
			.highlighted {background-color: yellow;}
			.submit {width: 120px;}
		</style>

		<script type="text/javascript">
			<!--  
				var currentNode;
				var idcount = 0;

				function byID() {
					var id = document.getElementById("gbi").value;
					var target = document.getElementById(id);
					if (target)
						switchTo(target);
				}

				function insert() {
					var newNode = createNewNode(document.getElementById("ins").value);
					currentNode.parentNode.insertBefore(newNode, currentNode);
					switchTo(newNode);
				}

				function appendNode() {
					var newNode = createNewNode(document.getElementById("append").value);
					currentNode.appendChild(newNode);
					switchTo(newNode);
				}

				function replaceCurrent() {
					var newNode = createNewNode(document.getElementById("replace").value);
					currentNode.parentNode.replaceChild(newNode, currentNode);
					switchTo(newNode);
				}

				function remove() {
					if (currentNode.parentNode == document.body)
						alert("Can't remove a top-level element.");	
					else {
						var oldNode = currentNode;
						switchTo(oldNode.parentNode);
						currentNode.removeChild(oldNode);
					}
				}

				function parent() {
					var target = currentNode.parentNode;
					if (target != document.body)
						switchTo(target);
					else
						alert("No parent.");
				}

				function createNewNode(text) {
					var newNode = document.createElement("p");
					nodeId = "new" + idcount; // MINE: A variable declared w/o var.
					++idcount;
					newNode.id = nodeId;
					text = "[" + nodeId + "]" + text;
					newNode.appendChild(document.createTextNode(text));
					return newNode;
				}

				function switchTo(newNode) {
					currentNode.className = "";
					currentNode = newNode;
					currentNode.className = "highlighted";
					document.getElementById("gbi").value = currentNode.id;
				}
			//-->
		</script>
	</head>

	<body onload="currentNode = document.getElementById('bigheading')">
		<h1 id="bigheading" class="highlighted">[bigheading] DHTML Object Model</h1>
		<h3 id="smallheding">[smallheding] Element Functionality</h3>
		
		<p id="para1">[para1] The Document Object Model (DOM)...</p>
		<p id="para2">[para2] For more information check out...
			<a id="link" href="http://www.deitel.com/javascript">[link] JavaScript Resource Center.</a>
		</p>
		<p id="para3">[para3] The buttons below demonstrate: (list)</p>
		
		<ul id="list">
			<li id="item1">[item1] getElementById and parentNode</li>
			<li id="item2">[item2] insertBefore and appendChild</li>
			<li id="item3">[item3] replaceChild and removeChild</li>
		</ul>

		<div id="nav" class="nav">
			<form onsubmit="return false" action="">
				<table>
					<tr>
						<td><input type="text" id="gbi" value="bigheading"></td>
						<td><input type="submit" value="Get By id" onclick="byID()" class="submit"></td> <!-- MINE: type="submit"???????????? In this case, it seems equivalent to type="button" below. -->
						<!-- TEST: <td><input type="button" value="Get By id" onclick="byID()" class="submit"></td> -->
					</tr>
					<tr>
						<td><input type="text" id="ins"></td>
						<td><input type="submit" value="Insert Before" onclick="insert()" class="submit"></td>
					</tr>
					<tr>
						<td><input type="text" id="append"></td>
						<td><input type="submit" value="Append Child" onclick="appendNode()" class="submit"></td>
					</tr>
					<tr>
						<td><input type="text" id="replace"></td>
						<td><input type="submit" value="Replace Current" onclick="replaceCurrent()" class="submit"></td>
					</tr>
					<tr>
						<td/>
						<td><input type="submit" value="Remove Current" onclick="remove()" class="submit"></td>
					</tr>
					<tr>
						<td/>
						<td><input type="submit" value="Get Parent" onclick="parent()" class="submit"></td>
					</tr>
				</table>
			</form>
		</div>
	</body>
</html>